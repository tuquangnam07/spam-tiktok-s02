<!DOCTYPE html>
<html lang="vi">
<head>
    <title>Qu·∫£n Tr·ªã Vi√™n - ùë∫ùë∑ùë®ùë¥ ùëªùë∞ùë≤ ùëªë∂úùë≤ ùë∫ùüéùüê</title>
    <link rel="stylesheet" href="../css/lib/toastify.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/admin.css"> <link rel="stylesheet" href="../css/responsive.css">
    <script src="../js/auth-guard.js" type="module"></script>
</head>
<body>
    <header class="main-header">
        <nav id="admin-nav">
            <a href="/trangchu/admin.html" class="active">Qu·∫£n Tr·ªã Vi√™n</a>
        </nav>
        </header>

    <main class="container">
        <h1>B·∫£ng ƒëi·ªÅu khi·ªÉn Qu·∫£n Tr·ªã Vi√™n</h1>

        <nav class="admin-tabs">
            <button class="tab-link active" data-tab="tab-users">Qu·∫£n l√Ω CTV</button>
            <button class="tab-link" data-tab="tab-salary">Qu·∫£n l√Ω L∆∞∆°ng</button>
            <button class="tab-link" data-tab="tab-stats">Th·ªëng k√™</button>
        </nav>

        <div id="tab-users" class="tab-content active">
            <h2>Qu·∫£n l√Ω C·ªông T√°c Vi√™n</h2>
            <div class="admin-toolbar">
                <button id="add-user-btn" class="btn btn-primary">Th√™m Th√†nh vi√™n</button>
                <button id="export-users-btn" class="btn btn-secondary">Xu·∫•t Excel</button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>H·ªç T√™n</th>
                            <th>Email</th>
                            <th>ID Tele</th>
                            <th>Vai tr√≤</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        </tbody>
                </table>
            </div>
            <div class="pagination-controls">
                <button id="users-prev-btn" class="btn btn-secondary">&lt; Tr∆∞·ªõc</button>
                <button id="users-next-btn" class="btn btn-secondary">Sau &gt;</button>
            </div>
        </div>

        <div id="tab-salary" class="tab-content hidden">
            <h2>Qu·∫£n l√Ω L∆∞∆°ng</h2>
            
            <section class="admin-section">
                <h3>Th√™m l∆∞∆°ng th·ªß c√¥ng</h3>
                <form id="manual-salary-form" class="form-grid">
                    <div class="form-group">
                        <label for="salary-user-select">Ch·ªçn CTV</label>
                        <select id="salary-user-select" required>
                            <option value="">ƒêang t·∫£i danh s√°ch...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="salary-amount">S·ªë ti·ªÅn (VNƒê)</label>
                        <input type="number" id="salary-amount" required>
                    </div>
                    <div class="form-group">
                        <label for="salary-date">Ng√†y</label>
                        <input type="date" id="salary-date" required>
                    </div>
                    <div class="form-group">
                        <label for="salary-status">Tr·∫°ng th√°i</label>
                        <select id="salary-status" required>
                            <option value="ch·ªù x·ª≠ l√Ω">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="ƒë√£ thanh to√°n">ƒê√£ thanh to√°n</option>
                            <option value="ƒë√£ h·ªßy b·ªè">ƒê√£ h·ªßy b·ªè</option>
                        </select>
                    </div>
                    <button type="submit" id="manual-salary-btn" class="btn btn-primary form-grid-span">
                        <span class="btn-text">Th√™m L∆∞∆°ng</span>
                        <span class="spinner hidden"></span>
                    </button>
                </form>
            </section>
            
            <section class="admin-section">
                <h3>T·∫£i l√™n h√†ng lo·∫°t (Excel)</h3>
                <p>File Excel ph·∫£i c√≥ c·ªôt 'Row Labels' (ch·ª©a ID Tele) v√† 'Sum of L∆Ø∆†NG' (ch·ª©a s·ªë l∆∞∆°ng d·∫°ng 55,2).</p>
                <div class="form-group">
                    <label for="excel-file-input">Ch·ªçn file .xlsx ho·∫∑c .xls</label>
                    <input type="file" id="excel-file-input" accept=".xls, .xlsx">
                </div>
                <button id="process-excel-btn" class="btn">
                    <span class="btn-text">X·ª≠ l√Ω File</span>
                    <span class="spinner hidden"></span>
                </button>
                <div id="excel-summary" class="hidden"></div>
            </section>
        </div>

        <div id="tab-stats" class="tab-content hidden">
            <h2>Th·ªëng k√™</h2>
            <p>C√°c bi·ªÉu ƒë·ªì v√† s·ªë li·ªáu th·ªëng k√™ s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y.</p>
            </div>
    </main>

    <div id="admin-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" id="close-admin-modal">&times;</span>
            <h2 id="admin-modal-title">Th√™m/S·ª≠a CTV</h2>
            <form id="admin-user-form">
                <input type="hidden" id="admin-user-id"> <h3>T√†i kho·∫£n</h3>
                <div class="form-group">
                    <label for="admin-user-email">Email</label>
                    <input type="email" id="admin-user-email" required>
                </div>
                <div class="form-group">
                    <label for="admin-user-password">M·∫≠t kh·∫©u (ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi)</label>
                    <input type="password" id="admin-user-password">
                </div>
                <div class="form-group">
                    <label for="admin-user-role">Vai tr√≤</label>
                    <select id="admin-user-role" required>
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>

                <h3>H·ªì s∆°</h3>
                <div class="form-group">
                    <label for="admin-profile-hoTen">H·ªç v√† T√™n</label>
                    <input type="text" id="admin-profile-hoTen" required>
                </div>
                <button type="submit" id="admin-user-submit-btn" class="btn">
                    <span class="btn-text">L∆∞u</span>
                    <span class="spinner hidden"></span>
                </button>
            </form>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js" type="module"></script>
    
    <script src="../js/lib/toastify.js"></script>
    <script src="../js/lib/sheet.js"></script> <script src="../js/firebase-config.js" type="module"></script>
    <script src="../js/main.js" type="module"></script> <script src="../js/admin.js" type="module"></script> <script src="../js/admin-users.js" type="module"></script> <script src="../js/admin-salary.js" type="module"></script> </body>
</html>
